# SPA ClientApp created using the Aurelia CLI

Aurelia CLI was used to create the ClientApp dir, the Aurelia template files from the "Aurelia Skeleton Navigation" repo and template files from the retired "Microsoft.AspNetCore.SpaTemplate" package were then added and combined.
The "Microsoft.AspNetCore.SpaTemplate" uses a vertical nav menu, this was used to create a sub-menu (child router) navigation within the "Aurelia Skeleton Navigation" template. A small amount of refactoring was done to combine and organise the template.

Files from the "Aurelia Skeleton Navigation" webpack template were used:
https://github.com/aurelia/skeleton-navigation/tree/master/skeleton-typescript-webpack


# Build Notes

### Install the Aurelia CLI
```npm install aurelia-cli -g```

### Aurelia Project Creation and Configuration

Rename / move or delete the existing ClientApp dir.
Run this from within the dotnet project folder:

```au new```

Options chosen: (to match the "skeleton-typescript-webpack" project)

    Name: ClientApp
    Platform: Web
    Bundler: Webpack
    Loader: None
    Transpiler: TypeScript
    Markup Processor: Minimal Minification
    CSS Processor: PostCSS
    Unit Test Runner: Karma
    Unit Test Runner: Jest
    Integration Test Runner: Protractor
    Editor: Visual Studio Code
Would you like to install the project dependencies?

    2. Yes, use NPM

A new ClientApp dir will now have been generated.

### Update the ClientApp dir

Add the files from the Aurelia Skeleton Navigation repo to the ClientApp project generated by the CLI.
Use the last commit before it was upgraded to bootstrap 4:

https://github.com/aurelia/skeleton-navigation/commit/6f4ec02136bfdd4f4575850d32b02d369a26b4bb

### Running and building

#### Run in dev mode

launch in Watch mode (Watches source files for changes and refreshes the bundles automatically)

```au run --watch```

or

```npm start```

or launch in Hot Module Reload mode

```au run --watch --hmr```

Note: The Font Awesome spinner on the splash screen that appears while Aurelia is loading in the browser does not appear in dev mode because the CSS is concatenated and added added inline with the index.html page for performance reasons.
The Webpack extractCss plugin needs to be used which is the default in production mode to separate out the CSS.
https://github.com/aurelia/skeleton-navigation/issues/855

Run in dev mode with extractCss plugin to disable inline css used in dev mode:

```npm start -- webpack.server.extractCss```

#### Analyze in dev mode

```au run --analyze```

opens up the Webpack Bundler Analyzer, giving a visualization of the bundle contents.


#### Build in production mode:

```au build --env prod```

output will end up in the dist folder, everything you need to deploy can be found in the dist folder. Just copy this to the webserver and you'll be good to go.

#### Run in production mode:

```au run --env prod```

or

```au run --watch --env prod```

or

```npm start -- build```

```npm start -- serve```

#### Analyze in production mode

```au run --analyze --env prod```


